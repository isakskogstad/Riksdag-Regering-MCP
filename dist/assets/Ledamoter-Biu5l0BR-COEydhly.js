import{A as e,L as s,v as a,f as t,$ as l,U as r,Z as n,K as i,n as d,x as o,C as c,E as m,O as x,j as g,h,S as u,D as f,Y as j,H as p,d as v,G as N,W as b,R as y,Q as k}from"./index-Dvj5Fnvj.js";import{k as w,C as _,P as S}from"./avatar-PApL8q4f-CsyQ2EiW.js";import{r as L}from"./FilterBar-BT3NUdz--CoJLJjLW.js";import{c as C}from"./EmptyState-J9hu3_4Q-rxQZmsJH.js";import{n as $,s as A,i as R,l as q,v as D}from"./separator-DC5bqMQM-DkR_d8pm.js";import{t as M}from"./calendar-C0Po1oJA-ZB5SqKl4.js";import"./alert-BBRM3LDk-C87cXJBj.js";import"./supabase-vendor-CFP917pd.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=b("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),F=o,z=c,E=e.forwardRef(({className:e,...s},t)=>a.jsx(y,{ref:t,className:x("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));E.displayName=y.displayName;const P=e.forwardRef(({className:e,children:s,...t},l)=>a.jsxs(z,{children:[a.jsx(E,{}),a.jsxs(m,{ref:l,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,a.jsxs(g,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[a.jsx(h,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));P.displayName=m.displayName;const B=({className:e,...s})=>a.jsx("div",{className:x("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});B.displayName="DialogHeader";const K=e.forwardRef(({className:e,...s},t)=>a.jsx(u,{ref:t,className:x("text-lg font-semibold leading-none tracking-tight",e),...s}));K.displayName=u.displayName;const Q=e.forwardRef(({className:e,...s},t)=>a.jsx(f,{ref:t,className:x("text-sm text-muted-foreground",e),...s}));Q.displayName=f.displayName;const T=({intressentId:e})=>{const{data:t,isLoading:o,error:c}=s({queryKey:["sagt-och-gjort-stats",e],queryFn:async()=>{const{data:s,error:a}=await k.from("v_ledamot_statistik").select("*").eq("intressent_id",e).single();if(a)throw a;return s},enabled:!!e}),m=e=>e?new Date(e).toLocaleDateString("sv-SE",{year:"numeric",month:"long",day:"numeric"}):"Ingen data";if(o)return a.jsxs(l,{children:[a.jsxs(r,{children:[a.jsx(n,{className:"h-6 w-48 mb-2"}),a.jsx(n,{className:"h-4 w-64"})]}),a.jsx(j,{children:a.jsx("div",{className:"space-y-4",children:[...Array(4)].map((e,s)=>a.jsx(n,{className:"h-16 w-full"},s))})})]});if(c||!t)return a.jsxs(l,{children:[a.jsxs(r,{children:[a.jsx(i,{children:"Sagt och gjort"}),a.jsx(p,{children:"Ingen statistik tillgänglig"})]}),a.jsx(j,{children:a.jsx("p",{className:"text-sm text-muted-foreground",children:"Statistik för denna ledamot kunde inte hämtas."})})]});const x=[{label:"Anföranden",count:t.antal_anforanden,icon:$,color:"text-blue-500"},{label:"Motioner",count:t.antal_motioner,icon:A,color:"text-green-500"},{label:"Skriftliga frågor",count:t.antal_fragor,icon:R,color:"text-orange-500"},{label:"Interpellationer",count:t.antal_interpellationer,icon:q,color:"text-purple-500"}];return a.jsxs(l,{children:[a.jsx(r,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs(i,{className:"flex items-center gap-2",children:[a.jsx(v,{className:"h-5 w-5"}),"Sagt och gjort"]}),a.jsx(p,{children:"Aktivitetsstatistik från riksdagen (2010/11 - )"})]}),a.jsxs(d,{variant:"outline",className:"text-lg px-4 py-2",children:[t.totalt_antal_aktiviteter.toLocaleString("sv-SE")," aktiviteter"]})]})}),a.jsxs(j,{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-2 gap-4",children:x.map(e=>a.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[a.jsx(e.icon,{className:`h-6 w-6 ${e.color}`}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:e.count.toLocaleString("sv-SE")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:e.label})]})]},e.label))}),a.jsx(D,{}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50",children:[a.jsx(N,{className:"h-6 w-6 text-blue-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xl font-bold",children:(e=>{if(!e)return"0 min";const s=Math.floor(e/3600),a=Math.floor(e%3600/60);return s>0?`${s}h ${a}min`:`${a} min`})(t.total_talartid_sekunder)}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Total talartid"})]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50",children:[a.jsx(I,{className:"h-6 w-6 text-green-500"}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-xl font-bold",children:[(t.totalt_antal_tecken/1e3).toFixed(0),"k"]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Antal tecken"})]})]})]}),a.jsx(D,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),a.jsx("span",{className:"text-muted-foreground",children:"Aktivitetsperiod:"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground mb-1",children:"Första aktivitet"}),a.jsx("div",{className:"font-medium",children:m(t.forsta_aktivitet)})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-muted-foreground mb-1",children:"Senaste aktivitet"}),a.jsx("div",{className:"font-medium",children:m(t.senaste_aktivitet)})]})]})]})]})]})},H=()=>{var o,c;const[m,x]=e.useState(""),[g,h]=e.useState(null),[u,f]=e.useState(!1),{data:j,isLoading:p}=s({queryKey:["ledamoter"],queryFn:async()=>{const{data:e,error:s}=await k.from("riksdagen_ledamoter").select("*").order("efternamn",{ascending:!0});if(s)throw s;return e}}),v={S:"bg-red-600",M:"bg-blue-600",SD:"bg-yellow-600",C:"bg-green-600",V:"bg-red-700",KD:"bg-blue-800",L:"bg-blue-400",MP:"bg-green-500"},N=null==j?void 0:j.filter(e=>{var s,a,t,l;const r=m.toLowerCase();return(null==(s=e.fornamn)?void 0:s.toLowerCase().includes(r))||(null==(a=e.efternamn)?void 0:a.toLowerCase().includes(r))||(null==(t=e.parti)?void 0:t.toLowerCase().includes(r))||(null==(l=e.valkrets)?void 0:l.toLowerCase().includes(r))});return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx("div",{className:"w-full bg-primary py-1"}),a.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[a.jsxs("header",{className:"mb-12",children:[a.jsx(t,{to:"/riksdagen",className:"text-primary hover:underline mb-4 inline-block",children:"← Tillbaka till Riksdagen"}),a.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Riksdagens Ledamöter"}),a.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),a.jsxs("p",{className:"text-muted-foreground",children:[(null==N?void 0:N.length)||0," ledamöter i riksdagen"]})]}),a.jsx(L,{searchQuery:m,onSearchChange:x,placeholder:"Sök ledamot, parti eller valkrets..."}),p?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(12)].map((e,s)=>a.jsx(l,{children:a.jsxs(r,{children:[a.jsx(n,{className:"h-24 w-24 rounded-full mx-auto mb-4"}),a.jsx(n,{className:"h-6 w-3/4 mx-auto mb-2"}),a.jsx(n,{className:"h-4 w-1/2 mx-auto"})]})},s))}):N&&0===N.length?a.jsx(C,{message:m?"Inga ledamöter hittades":"Inga ledamöter i databasen",suggestion:m?"Prova att ändra din sökning":"Använd 'Hämta data'-knappen på Riksdagen-sidan för att ladda ned ledamöter"}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:null==N?void 0:N.map(e=>{var s,t;return a.jsx(l,{className:"hover:shadow-lg transition-all cursor-pointer hover:scale-[1.02]",onClick:()=>(h(e),void f(!0)),children:a.jsxs(r,{className:"text-center",children:[a.jsxs(w,{className:"h-24 w-24 mx-auto mb-4",children:[a.jsx(_,{src:e.local_bild_url||e.bild_url||void 0,alt:`${e.fornamn} ${e.efternamn}`}),a.jsxs(S,{children:[null==(s=e.fornamn)?void 0:s[0],null==(t=e.efternamn)?void 0:t[0]]})]}),a.jsxs(i,{className:"text-lg",children:[e.tilltalsnamn||e.fornamn," ",e.efternamn]}),a.jsxs("div",{className:"flex flex-col gap-2 items-center mt-2",children:[e.parti&&a.jsx(d,{className:`${v[e.parti]||"bg-gray-600"} text-white`,children:e.parti}),e.valkrets&&a.jsx("span",{className:"text-sm text-muted-foreground",children:e.valkrets})]})]})},e.id)})}),a.jsx(F,{open:u,onOpenChange:f,children:a.jsx(P,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:g&&a.jsxs(a.Fragment,{children:[a.jsx(B,{children:a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsxs(w,{className:"h-20 w-20",children:[a.jsx(_,{src:g.local_bild_url||g.bild_url||void 0,alt:`${g.fornamn} ${g.efternamn}`}),a.jsxs(S,{className:"text-2xl",children:[null==(o=g.fornamn)?void 0:o[0],null==(c=g.efternamn)?void 0:c[0]]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs(K,{className:"text-2xl",children:[g.tilltalsnamn||g.fornamn," ",g.efternamn]}),a.jsxs(Q,{className:"flex items-center gap-2 mt-2",children:[g.parti&&a.jsx(d,{className:`${v[g.parti]||"bg-gray-600"} text-white`,children:g.parti}),g.valkrets&&a.jsx("span",{className:"text-sm",children:g.valkrets})]})]})]})}),a.jsx("div",{className:"mt-6",children:a.jsx(T,{intressentId:g.intressent_id})})]})})})]})]})};export{H as default};
