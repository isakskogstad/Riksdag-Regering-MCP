import{c as e,L as s,v as a,X as t,$ as r,U as n,Z as l,a as i,n as d,K as m,H as c,T as o,e as x,Q as h}from"./index-Dvj5Fnvj.js";import{c as u}from"./EmptyState-J9hu3_4Q-rxQZmsJH.js";import{k as j}from"./DynamicBreadcrumbs-Bgv6oxQC-FIw1lSPj.js";import{t as f}from"./calendar-C0Po1oJA-ZB5SqKl4.js";import{t as g}from"./external-link-DO6NI0fG-CEdz9uJh.js";import"./alert-BBRM3LDk-C87cXJBj.js";import"./supabase-vendor-CFP917pd.js";const p=()=>{const[p]=e(),k=p.get("search"),{data:N,isLoading:b}=s({queryKey:["dokument",k],queryFn:async()=>{let e=h.from("riksdagen_dokument").select("*").order("datum",{ascending:!1});k&&(e=e.or(`titel.ilike.%${k}%,subtitel.ilike.%${k}%,doktyp.ilike.%${k}%`));const{data:s,error:a}=await e;if(a)throw a;return s}});return a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(t,{}),a.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[a.jsx(j,{}),a.jsxs("header",{className:"mb-12",children:[a.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Riksdagsdokument"}),a.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),a.jsx("p",{className:"text-muted-foreground",children:k?a.jsxs(a.Fragment,{children:["Sökresultat för: ",a.jsx("span",{className:"font-semibold text-foreground",children:k}),N&&N.length>0&&a.jsxs(a.Fragment,{children:[" (",N.length," ",(N.length,"dokument"),")"]})]}):"Senaste dokumenten från riksdagen"})]}),b?a.jsx("div",{className:"space-y-4",children:[...Array(10)].map((e,s)=>a.jsx(r,{children:a.jsxs(n,{children:[a.jsx(l,{className:"h-6 w-3/4 mb-2"}),a.jsx(l,{className:"h-4 w-1/2"})]})},s))}):N&&0===N.length?a.jsx(u,{message:"Inga dokument hittades",suggestion:"Använd 'Hämta data'-knappen på Riksdagen-sidan för att ladda ned dokument från Riksdagens API"}):a.jsx("div",{className:"space-y-4",children:null==N?void 0:N.map(e=>a.jsx(r,{className:"hover:shadow-lg transition-shadow",children:a.jsx(n,{children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(i,{className:"h-4 w-4 text-primary"}),e.doktyp&&a.jsx(d,{variant:"outline",children:e.doktyp}),e.beteckning&&a.jsx(d,{variant:"secondary",children:e.beteckning})]}),a.jsx(m,{className:"text-xl mb-2",children:e.titel||"Dokument utan titel"}),e.subtitel&&a.jsx(c,{className:"text-base",children:e.subtitel}),a.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[e.datum&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(f,{className:"h-3 w-3"}),o(new Date(e.datum),{addSuffix:!0,locale:x})]}),e.organ&&a.jsxs("span",{children:["Organ: ",e.organ]}),e.status&&a.jsxs("span",{children:["Status: ",e.status]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[e.local_pdf_url&&a.jsxs("a",{href:e.local_pdf_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline font-medium",children:["PDF (Lokal) ",a.jsx(g,{className:"h-3 w-3"})]}),e.dokument_url_html&&a.jsxs("a",{href:e.dokument_url_html,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["HTML ",a.jsx(g,{className:"h-3 w-3"})]}),e.dokument_url_text&&a.jsxs("a",{href:e.dokument_url_text,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["Text ",a.jsx(g,{className:"h-3 w-3"})]})]})]})})},e.id))})]})]})};export{p as default};
