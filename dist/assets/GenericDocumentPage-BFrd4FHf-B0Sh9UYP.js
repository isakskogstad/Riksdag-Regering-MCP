import{A as e,aQ as t,L as a,v as n,f as r,s,p as i,q as o,$ as l,U as c,Z as d,K as u,H as m,a as h,n as f,Y as g,aR as x,aS as p,W as w,h as b,aT as v,aU as j,aV as N,aO as y,O as k,Q as C,aD as M,o as S,aW as T,aX as D,aY as P,aZ as O,a_ as F,a$ as L}from"./index-Dvj5Fnvj.js";import{c as Y}from"./EmptyState-J9hu3_4Q-rxQZmsJH.js";import{i as E}from"./useFavorites-CcbDWvNu-nyusx83m.js";import{l as q,p as z}from"./label-BIueh1FY-BBNQrB4L.js";import{t as H}from"./calendar-C0Po1oJA-ZB5SqKl4.js";import{t as $}from"./urlHelpers-CAXJNDPg-FIZwN2nf.js";import{e as _}from"./arrow-left-B6EjJi3z-By_dropn.js";import{c as A}from"./user-Dx5qHqNd-C9eItTad.js";import{t as B}from"./external-link-DO6NI0fG-CEdz9uJh.js";import{d as G}from"./alert-BBRM3LDk-C87cXJBj.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=w("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),I=w("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function R(e,t){var a,n,r,s;const i=v(),o=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.weekStartsOn)??i.weekStartsOn??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.weekStartsOn)??0,l=j(e),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function W(e){return R(e,{weekStartsOn:1})}function X(e){const t=j(e),a=t.getFullYear(),n=F(e,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const r=W(n),s=F(e,0);s.setFullYear(a,0,4),s.setHours(0,0,0,0);const i=W(s);return t.getTime()>=r.getTime()?a+1:t.getTime()>=i.getTime()?a:a-1}function U(e){const t=j(e);return t.setHours(0,0,0,0),t}function J(e,t){var a,n,r,s;const i=j(e),o=i.getFullYear(),l=v(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(s=null==(r=l.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??1,d=F(e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=R(d,t),m=F(e,0);m.setFullYear(o,0,c),m.setHours(0,0,0,0);const h=R(m,t);return i.getTime()>=u.getTime()?o+1:i.getTime()>=h.getTime()?o:o-1}function K(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const V={y(e,t){const a=e.getFullYear(),n=a>0?a:1-a;return K("yy"===t?n%100:n,t.length)},M(e,t){const a=e.getMonth();return"M"===t?String(a+1):K(a+1,2)},d:(e,t)=>K(e.getDate(),t.length),a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return"am"===a?"a.m.":"p.m."}},h:(e,t)=>K(e.getHours()%12||12,t.length),H:(e,t)=>K(e.getHours(),t.length),m:(e,t)=>K(e.getMinutes(),t.length),s:(e,t)=>K(e.getSeconds(),t.length),S(e,t){const a=t.length,n=e.getMilliseconds();return K(Math.trunc(n*Math.pow(10,a-3)),t.length)}},Z={G:function(e,t,a){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return a.ordinalNumber(n,{unit:"year"})}return V.y(e,t)},Y:function(e,t,a,n){const r=J(e,n),s=r>0?r:1-r;return"YY"===t?K(s%100,2):"Yo"===t?a.ordinalNumber(s,{unit:"year"}):K(s,t.length)},R:function(e,t){return K(X(e),t.length)},u:function(e,t){return K(e.getFullYear(),t.length)},Q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return K(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return K(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){const n=e.getMonth();switch(t){case"M":case"MM":return V.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return K(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){const r=function(e,t){const a=j(e),n=+R(a,t)-+function(e,t){var a,n,r,s;const i=v(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??1,l=J(e,t),c=F(e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),R(c,t)}(a,t);return Math.round(n/L)+1}(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):K(r,t.length)},I:function(e,t,a){const n=function(e){const t=j(e),a=+W(t)-+function(e){const t=X(e),a=F(e,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),W(a)}(t);return Math.round(a/L)+1}(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):K(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getDate(),{unit:"date"}):V.d(e,t)},D:function(e,t,a){const n=function(e){const t=j(e);return function(e,t){const a=U(e),n=U(t),r=+a-P(a),s=+n-P(n);return Math.round((r-s)/O)}(t,function(e){const t=j(e),a=F(e,0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}(t))+1}(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):K(n,t.length)},E:function(e,t,a){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){const r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return K(s,2);case"eo":return a.ordinalNumber(s,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){const r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return K(s,t.length);case"co":return a.ordinalNumber(s,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){const n=e.getDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return K(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){const n=e.getHours();let r;switch(r=12===n?"noon":0===n?"midnight":n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,a){const n=e.getHours();let r;switch(r=n>=17?"evening":n>=12?"afternoon":n>=4?"morning":"night",t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),a.ordinalNumber(t,{unit:"hour"})}return V.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getHours(),{unit:"hour"}):V.H(e,t)},K:function(e,t,a){const n=e.getHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):K(n,t.length)},k:function(e,t,a){let n=e.getHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):K(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):V.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getSeconds(),{unit:"second"}):V.s(e,t)},S:function(e,t){return V.S(e,t)},X:function(e,t,a){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return te(n);case"XXXX":case"XX":return ae(n);default:return ae(n,":")}},x:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"x":return te(n);case"xxxx":case"xx":return ae(n);default:return ae(n,":")}},O:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ee(n,":");default:return"GMT"+ae(n,":")}},z:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ee(n,":");default:return"GMT"+ae(n,":")}},t:function(e,t,a){return K(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,a){return K(e.getTime(),t.length)}};function ee(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),s=n%60;return 0===s?a+String(r):a+String(r)+t+K(s,2)}function te(e,t){return e%60==0?(e>0?"-":"+")+K(Math.abs(e)/60,2):ae(e,t)}function ae(e,t=""){const a=e>0?"-":"+",n=Math.abs(e);return a+K(Math.trunc(n/60),2)+t+K(n%60,2)}const ne=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},re=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},se={p:re,P:(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return ne(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",ne(n,t)).replace("{{time}}",re(r,t))}},ie=/^D+$/,oe=/^Y+$/,le=["D","DD","YY","YYYY"],ce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,de=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ue=/^'([^]*?)'?$/,me=/''/g,he=/[a-zA-Z]/;function fe(e,t,a){var n,r,s,i;const o=v(),l=o.locale??N,c=o.firstWeekContainsDate??(null==(r=null==(n=o.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??1,d=o.weekStartsOn??(null==(i=null==(s=o.locale)?void 0:s.options)?void 0:i.weekStartsOn)??0,u=j(e);if(!function(e){if(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const a=j(e);return!isNaN(Number(a))}(u))throw new RangeError("Invalid time value");let m=t.match(de).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,se[t])(e,l.formatLong):e}).join("").match(ce).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:ge(e)};if(Z[t])return{isToken:!0,value:e};if(t.match(he))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});l.localize.preprocessor&&(m=l.localize.preprocessor(u,m));const h={firstWeekContainsDate:c,weekStartsOn:d,locale:l};return m.map(a=>{if(!a.isToken)return a.value;const n=a.value;var r;return r=n,(oe.test(r)||function(e){return ie.test(e)}(n))&&function(e,t,a){const n=function(e,t,a){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,a);if(console.warn(n),le.includes(e))throw new RangeError(n)}(n,t,String(e)),(0,Z[n[0]])(u,n,l.localize,h)}).join("")}function ge(e){const t=e.match(ue);return t?t[1].replace(me,"'"):e}const xe=({tableName:e,documentId:t,size:a="sm"})=>{const{isFavorite:r,isLoading:i,toggleFavorite:o}=E(e,t);return n.jsxs(s,{variant:"ghost",size:a,onClick:()=>o(),disabled:i,className:"gap-2",children:[n.jsx(y,{className:k("h-4 w-4 transition-all",r&&"fill-destructive text-destructive")}),"icon"!==a&&(r?"I favoriter":"Spara")]})},pe=x,we=p,be=e.forwardRef(({className:e,align:t="center",sideOffset:a=4,...r},s)=>n.jsx(T,{children:n.jsx(D,{ref:s,align:t,sideOffset:a,className:k("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));be.displayName=D.displayName;const ve=({dateFrom:e,dateTo:t,selectedCategories:a,availableCategories:r,onDateFromChange:i,onDateToChange:l,onCategoryToggle:c,onClearFilters:d})=>{const u=e||t||a.length>0;return n.jsxs(pe,{children:[n.jsx(we,{asChild:!0,children:n.jsxs(s,{variant:"outline",className:"gap-2",children:[n.jsx(I,{className:"h-4 w-4"}),"Filter",u&&n.jsx(f,{variant:"secondary",className:"ml-2",children:(e?1:0)+(t?1:0)+a.length})]})}),n.jsx(be,{className:"w-80",align:"end",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-semibold",children:"Avancerade filter"}),u&&n.jsxs(s,{variant:"ghost",size:"sm",onClick:d,children:[n.jsx(b,{className:"h-4 w-4 mr-1"}),"Rensa"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(z,{className:"flex items-center gap-2",children:[n.jsx(H,{className:"h-4 w-4"}),"Från datum"]}),n.jsx(o,{type:"date",value:e,onChange:e=>i(e.target.value)})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(z,{className:"flex items-center gap-2",children:[n.jsx(H,{className:"h-4 w-4"}),"Till datum"]}),n.jsx(o,{type:"date",value:t,onChange:e=>l(e.target.value)})]}),r.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(z,{children:"Kategorier"}),n.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto",children:r.map(e=>n.jsx(f,{variant:a.includes(e)?"default":"outline",className:"cursor-pointer",onClick:()=>c(e),children:e},e))})]})]})})]})},je=({className:e,...t})=>n.jsx("nav",{role:"navigation","aria-label":"pagination",className:k("mx-auto flex w-full justify-center",e),...t});je.displayName="Pagination";const Ne=e.forwardRef(({className:e,...t},a)=>n.jsx("ul",{ref:a,className:k("flex flex-row items-center gap-1",e),...t}));Ne.displayName="PaginationContent";const ye=e.forwardRef(({className:e,...t},a)=>n.jsx("li",{ref:a,className:k("",e),...t}));ye.displayName="PaginationItem";const ke=({className:e,isActive:t,size:a="icon",...r})=>n.jsx("a",{"aria-current":t?"page":void 0,className:k(M({variant:t?"outline":"ghost",size:a}),e),...r});ke.displayName="PaginationLink";const Ce=({className:e,...t})=>n.jsxs(ke,{"aria-label":"Go to previous page",size:"default",className:k("gap-1 pl-2.5",e),...t,children:[n.jsx(Q,{className:"h-4 w-4"}),n.jsx("span",{children:"Previous"})]});Ce.displayName="PaginationPrevious";const Me=({className:e,...t})=>n.jsxs(ke,{"aria-label":"Go to next page",size:"default",className:k("gap-1 pr-2.5",e),...t,children:[n.jsx("span",{children:"Next"}),n.jsx(S,{className:"h-4 w-4"})]});Me.displayName="PaginationNext";const Se=({tableName:x,title:p,description:w,source:b,backLink:v=("riksdagen"===b?"/riksdagen":"/regeringskansliet"),dataType:j,dateColumn:N="publicerad_datum",titleColumn:y="titel"})=>{const[k,M]=e.useState(""),[S,T]=e.useState("datum"),[D,P]=e.useState(1),[O,F]=e.useState(""),[L,E]=e.useState(""),[z,Q]=e.useState([]),{trackView:I}={trackView:t({mutationFn:async({tableName:e,documentId:t})=>{const{error:a}=await C.rpc("increment_document_view",{p_table_name:e,p_document_id:t});if(a)throw a}}).mutate},R=function(t,a=300){const[n,r]=e.useState(t);return e.useEffect(()=>{const e=setTimeout(()=>{r(t)},a);return()=>{clearTimeout(e)}},[t,a]),n}(k,300),{data:W,isLoading:X}=a({queryKey:[x,R,S,O,L,z],queryFn:async()=>{let e=C.from(x).select("*");R&&R.length>=2&&(e=e.or(`titel.ilike.%${R}%,document_id.ilike.%${R}%,beteckningsnummer.ilike.%${R}%`)),O&&(e=e.gte(N,O)),L&&(e=e.lte(N,L));const t="datum"===S?N:y;e=e.order(t,{ascending:"datum"!==S,nullsFirst:!1});const{data:a,error:n}=await e;if(n)throw n;return a}}),U=e.useMemo(()=>{if(!W)return[];const e=new Set;return W.forEach(t=>{t.kategorier&&Array.isArray(t.kategorier)&&t.kategorier.forEach(t=>e.add(t))}),Array.from(e).sort()},[W]),J=e.useMemo(()=>W?0===z.length?W:W.filter(e=>!(!e.kategorier||!Array.isArray(e.kategorier))&&z.some(t=>e.kategorier.includes(t))):[],[W,z]),K=Math.ceil(((null==J?void 0:J.length)||0)/20),V=e.useMemo(()=>{const e=20*(D-1);return(null==J?void 0:J.slice(e,e+20))||[]},[J,D]),Z=e=>{if(!e)return null;const t=Array.isArray(e)?e:[e];return 0===t.length?null:n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:t.map((e,t)=>{const a=e.name||e.filename||`Fil ${t+1}`,r=e.url||e.local_url||e;return"string"==typeof r&&r?n.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-primary hover:underline",children:[n.jsx(G,{className:"h-3 w-3"}),a]},t):null})})},ee=e=>!!e&&(!Array.isArray(e)||e.length>0);return n.jsx("div",{className:"min-h-screen bg-background",children:n.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-8 max-w-7xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx(r,{to:v,children:n.jsxs(s,{variant:"ghost",className:"mb-4",children:[n.jsx(_,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),n.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold mb-4 text-foreground",children:p}),n.jsx("p",{className:"text-muted-foreground text-lg mb-6",children:w}),n.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 items-stretch md:items-center mb-6",children:[n.jsxs("div",{className:"relative flex-1 min-w-0",children:[n.jsx(i,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),n.jsx(o,{placeholder:"Sök efter titel, dokumentnummer eller beteckning...",value:k,onChange:e=>M(e.target.value),className:"pl-10 h-11"})]}),n.jsxs("select",{value:S,onChange:e=>T(e.target.value),className:"px-4 py-2 h-11 border rounded-md bg-background text-sm min-w-[200px]",children:[n.jsx("option",{value:"datum",children:"Sortera efter datum"}),n.jsx("option",{value:"titel",children:"Sortera efter titel"})]}),n.jsx(ve,{dateFrom:O,dateTo:L,selectedCategories:z,availableCategories:U,onDateFromChange:F,onDateToChange:E,onCategoryToggle:e=>{Q(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),P(1)},onClearFilters:()=>{F(""),E(""),Q([]),P(1)}}),n.jsxs(s,{variant:"outline",onClick:()=>{J&&0!==J.length&&((e,t)=>{if(!e||0===e.length)return;const a=Object.keys(e[0]),n=[a.join(","),...e.map(e=>a.map(t=>{const a=e[t];return null==a?"":"string"==typeof a&&(a.includes(",")||a.includes('"'))?`"${a.replace(/"/g,'""')}"`:a}).join(","))].join("\n"),r=new Blob(["\ufeff"+n],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(r);s.setAttribute("href",i),s.setAttribute("download",`${t}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)})(J.map(e=>{var t;return{titel:e.titel,document_id:e.document_id,beteckningsnummer:e.beteckningsnummer,publicerad_datum:e.publicerad_datum,avsandare:e.avsandare||e.departement,kategorier:null==(t=e.kategorier)?void 0:t.join("; ")}}),`${p.toLowerCase().replace(/\s+/g,"-")}-${(new Date).toISOString().split("T")[0]}`)},disabled:!J||0===J.length,className:"h-11",children:[n.jsx(q,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:"Exportera CSV"}),n.jsx("span",{className:"sm:hidden",children:"CSV"})]}),n.jsxs(s,{variant:"outline",onClick:()=>{J&&0!==J.length&&((e,t)=>{if(!e||0===e.length)return;const a=JSON.stringify(e,null,2),n=new Blob([a],{type:"application/json"}),r=document.createElement("a"),s=URL.createObjectURL(n);r.setAttribute("href",s),r.setAttribute("download",`${t}.json`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)})(J,`${p.toLowerCase().replace(/\s+/g,"-")}-${(new Date).toISOString().split("T")[0]}`)},disabled:!J||0===J.length,className:"h-11",children:[n.jsx(q,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:"Exportera JSON"}),n.jsx("span",{className:"sm:hidden",children:"JSON"})]})]}),(O||L||z.length>0)&&n.jsx("div",{className:"mb-4 p-3 bg-muted rounded-md",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Visar ",(null==J?void 0:J.length)||0," av ",(null==W?void 0:W.length)||0," dokument"]})})]}),X?n.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(e=>n.jsx(l,{children:n.jsxs(c,{children:[n.jsx(d,{className:"h-6 w-3/4"}),n.jsx(d,{className:"h-4 w-1/2 mt-2"})]})},e))}):V&&0!==V.length?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"space-y-4",children:V.map(e=>n.jsxs(l,{className:"hover:shadow-sm transition-all duration-200 border-border/50",children:[n.jsx(c,{children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(u,{className:"text-xl mb-2",children:e.titel||e.document_id}),n.jsxs(m,{className:"space-y-1",children:[e.beteckningsnummer&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(h,{className:"h-4 w-4"}),n.jsx("span",{children:e.beteckningsnummer})]}),e.publicerad_datum&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(H,{className:"h-4 w-4"}),n.jsx("span",{children:fe(new Date(e.publicerad_datum),"d MMMM yyyy")})]}),(e.avsandare||e.departement)&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(A,{className:"h-4 w-4"}),n.jsx("span",{children:e.avsandare||e.departement})]})]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[e.kategorier&&e.kategorier.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1",children:e.kategorier.slice(0,3).map((e,t)=>n.jsx(f,{variant:"secondary",className:"text-xs",children:e},t))}),n.jsx(xe,{tableName:x,documentId:e.document_id})]})]})}),n.jsxs(g,{children:[e.innehall&&n.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-3",children:e.innehall}),ee(e.local_files)&&Z(e.local_files),!ee(e.local_files)&&$(e.url)&&n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:n.jsx("a",{href:$(e.url),target:"_blank",rel:"noopener noreferrer",children:n.jsxs(s,{variant:"outline",size:"sm",onClick:()=>I({tableName:x,documentId:e.document_id}),children:[n.jsx(B,{className:"h-4 w-4 mr-2"}),"Öppna externt"]})})})]})]},e.id))}),K>1&&n.jsx("div",{className:"mt-8",children:n.jsx(je,{children:n.jsxs(Ne,{children:[n.jsx(ye,{children:n.jsx(Ce,{onClick:()=>P(e=>Math.max(1,e-1)),className:1===D?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:K},(e,t)=>t+1).filter(e=>K<=7||1===e||e===K||e>=D-1&&e<=D+1).map((e,t,a)=>t>0&&e-a[t-1]>1?n.jsx(ye,{children:n.jsx("span",{className:"px-4",children:"..."})},`ellipsis-${e}`):n.jsx(ye,{children:n.jsx(ke,{onClick:()=>P(e),isActive:D===e,className:"cursor-pointer",children:e})},e)),n.jsx(ye,{children:n.jsx(Me,{onClick:()=>P(e=>Math.min(K,e+1)),className:D===K?"pointer-events-none opacity-50":"cursor-pointer"})})]})})})]}):n.jsx(Y,{message:`Inga ${p.toLowerCase()} hittades`,suggestion:k||O||L||z.length>0?"Prova att ändra dina filter":`Använd knappen ovan för att hämta ${p.toLowerCase()}`})]})})};export{Se as _};
