import{j as e}from"./ui-vendor-DdA1a0jp.js";import{u as s}from"./query-vendor-ow7rXqf0.js";import{A as a,C as t,a as r,S as n,F as l,B as i,b as d,d as m,h as o,s as c,i as x}from"./index-DLYd5yL7.js";import{f as h}from"./react-vendor-DwCPvY97.js";import{E as u}from"./EmptyState-J9hu3_4Q.js";import{D as j}from"./DynamicBreadcrumbs-Bgv6oxQC.js";import{C as f}from"./calendar-C0Po1oJA.js";import{E as p}from"./external-link-DO6NI0fG.js";import"./supabase-vendor-DZwaFCMP.js";import"./alert-BBRM3LDk.js";const g=()=>{const[g]=h(),k=g.get("search"),{data:N,isLoading:b}=s({queryKey:["dokument",k],queryFn:async()=>{let e=c.from("riksdagen_dokument").select("*").order("datum",{ascending:!1});k&&(e=e.or(`titel.ilike.%${k}%,subtitel.ilike.%${k}%,doktyp.ilike.%${k}%`));const{data:s,error:a}=await e;if(a)throw a;return s}});return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(a,{}),e.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[e.jsx(j,{}),e.jsxs("header",{className:"mb-12",children:[e.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Riksdagsdokument"}),e.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),e.jsx("p",{className:"text-muted-foreground",children:k?e.jsxs(e.Fragment,{children:["Sökresultat för: ",e.jsx("span",{className:"font-semibold text-foreground",children:k}),N&&N.length>0&&e.jsxs(e.Fragment,{children:[" (",N.length," ",(N.length,"dokument"),")"]})]}):"Senaste dokumenten från riksdagen"})]}),b?e.jsx("div",{className:"space-y-4",children:[...Array(10)].map((s,a)=>e.jsx(t,{children:e.jsxs(r,{children:[e.jsx(n,{className:"h-6 w-3/4 mb-2"}),e.jsx(n,{className:"h-4 w-1/2"})]})},a))}):N&&0===N.length?e.jsx(u,{message:"Inga dokument hittades",suggestion:"Använd 'Hämta data'-knappen på Riksdagen-sidan för att ladda ned dokument från Riksdagens API"}):e.jsx("div",{className:"space-y-4",children:null==N?void 0:N.map(s=>e.jsx(t,{className:"hover:shadow-lg transition-shadow",children:e.jsx(r,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(l,{className:"h-4 w-4 text-primary"}),s.doktyp&&e.jsx(i,{variant:"outline",children:s.doktyp}),s.beteckning&&e.jsx(i,{variant:"secondary",children:s.beteckning})]}),e.jsx(d,{className:"text-xl mb-2",children:s.titel||"Dokument utan titel"}),s.subtitel&&e.jsx(m,{className:"text-base",children:s.subtitel}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:[s.datum&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-3 w-3"}),o(new Date(s.datum),{addSuffix:!0,locale:x})]}),s.organ&&e.jsxs("span",{children:["Organ: ",s.organ]}),s.status&&e.jsxs("span",{children:["Status: ",s.status]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[s.local_pdf_url&&e.jsxs("a",{href:s.local_pdf_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline font-medium",children:["PDF (Lokal) ",e.jsx(p,{className:"h-3 w-3"})]}),s.dokument_url_html&&e.jsxs("a",{href:s.dokument_url_html,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["HTML ",e.jsx(p,{className:"h-3 w-3"})]}),s.dokument_url_text&&e.jsxs("a",{href:s.dokument_url_text,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["Text ",e.jsx(p,{className:"h-3 w-3"})]})]})]})})},s.id))})]})]})};export{g as default};
