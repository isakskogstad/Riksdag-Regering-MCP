import{j as e,az as t,aA as a,aB as n,aC as r}from"./ui-vendor-DdA1a0jp.js";import{r as s,L as i}from"./react-vendor-DwCPvY97.js";import{c as o,u as l}from"./query-vendor-ow7rXqf0.js";import{c,J as d,K as u,L as m,M as h,N as f,O as g,P as x,q as p,G as w,e as b,B as v,X as j,I as N,s as y,p as k,n as C,o as M,C as S,a as T,S as P,b as D,d as F,F as L,f as O}from"./index-DLYd5yL7.js";import{E}from"./EmptyState-J9hu3_4Q.js";import{a as Y}from"./useFavorites-CcbDWvNu.js";import{L as z,F as q}from"./label-BIueh1FY.js";import{C as H}from"./calendar-C0Po1oJA.js";import{g as $}from"./urlHelpers-CAXJNDPg.js";import{A as _}from"./arrow-left-B6EjJi3z.js";import{U as A}from"./user-Dx5qHqNd.js";import{E as G}from"./external-link-DO6NI0fG.js";import{D as B}from"./alert-BBRM3LDk.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=c("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Q=c("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function R(e,t){var a,n,r,s;const i=d(),o=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.weekStartsOn)??i.weekStartsOn??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.weekStartsOn)??0,l=u(e),c=l.getDay(),m=(c<o?7:0)+c-o;return l.setDate(l.getDate()-m),l.setHours(0,0,0,0),l}function W(e){return R(e,{weekStartsOn:1})}function X(e){const t=u(e),a=t.getFullYear(),n=m(e,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const r=W(n),s=m(e,0);s.setFullYear(a,0,4),s.setHours(0,0,0,0);const i=W(s);return t.getTime()>=r.getTime()?a+1:t.getTime()>=i.getTime()?a:a-1}function U(e){const t=u(e);return t.setHours(0,0,0,0),t}function K(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const a=u(e);return!isNaN(Number(a))}function V(e){const t=u(e),a=function(e,t){const a=U(e),n=U(t),r=+a-h(a),s=+n-h(n);return Math.round((r-s)/f)}(t,function(e){const t=u(e),a=m(e,0);return a.setFullYear(t.getFullYear(),0,1),a.setHours(0,0,0,0),a}(t));return a+1}function J(e){const t=u(e),a=+W(t)-+function(e){const t=X(e),a=m(e,0);return a.setFullYear(t,0,4),a.setHours(0,0,0,0),W(a)}(t);return Math.round(a/g)+1}function Z(e,t){var a,n,r,s;const i=u(e),o=i.getFullYear(),l=d(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(s=null==(r=l.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??1,h=m(e,0);h.setFullYear(o+1,0,c),h.setHours(0,0,0,0);const f=R(h,t),g=m(e,0);g.setFullYear(o,0,c),g.setHours(0,0,0,0);const x=R(g,t);return i.getTime()>=f.getTime()?o+1:i.getTime()>=x.getTime()?o:o-1}function ee(e,t){const a=u(e),n=+R(a,t)-+function(e,t){var a,n,r,s;const i=d(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(a=null==t?void 0:t.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(s=null==(r=i.locale)?void 0:r.options)?void 0:s.firstWeekContainsDate)??1,l=Z(e,t),c=m(e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),R(c,t)}(a,t);return Math.round(n/g)+1}function te(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const ae={y(e,t){const a=e.getFullYear(),n=a>0?a:1-a;return te("yy"===t?n%100:n,t.length)},M(e,t){const a=e.getMonth();return"M"===t?String(a+1):te(a+1,2)},d:(e,t)=>te(e.getDate(),t.length),a(e,t){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];default:return"am"===a?"a.m.":"p.m."}},h:(e,t)=>te(e.getHours()%12||12,t.length),H:(e,t)=>te(e.getHours(),t.length),m:(e,t)=>te(e.getMinutes(),t.length),s:(e,t)=>te(e.getSeconds(),t.length),S(e,t){const a=t.length,n=e.getMilliseconds();return te(Math.trunc(n*Math.pow(10,a-3)),t.length)}},ne="midnight",re="noon",se="morning",ie="afternoon",oe="evening",le="night",ce={G:function(e,t,a){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(n,{width:"abbreviated"});case"GGGGG":return a.era(n,{width:"narrow"});default:return a.era(n,{width:"wide"})}},y:function(e,t,a){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return a.ordinalNumber(n,{unit:"year"})}return ae.y(e,t)},Y:function(e,t,a,n){const r=Z(e,n),s=r>0?r:1-r;if("YY"===t){return te(s%100,2)}return"Yo"===t?a.ordinalNumber(s,{unit:"year"}):te(s,t.length)},R:function(e,t){return te(X(e),t.length)},u:function(e,t){return te(e.getFullYear(),t.length)},Q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return te(n,2);case"Qo":return a.ordinalNumber(n,{unit:"quarter"});case"QQQ":return a.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(n,{width:"narrow",context:"formatting"});default:return a.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,a){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return te(n,2);case"qo":return a.ordinalNumber(n,{unit:"quarter"});case"qqq":return a.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(n,{width:"narrow",context:"standalone"});default:return a.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,a){const n=e.getMonth();switch(t){case"M":case"MM":return ae.M(e,t);case"Mo":return a.ordinalNumber(n+1,{unit:"month"});case"MMM":return a.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(n,{width:"narrow",context:"formatting"});default:return a.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,a){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return te(n+1,2);case"Lo":return a.ordinalNumber(n+1,{unit:"month"});case"LLL":return a.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(n,{width:"narrow",context:"standalone"});default:return a.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){const r=ee(e,n);return"wo"===t?a.ordinalNumber(r,{unit:"week"}):te(r,t.length)},I:function(e,t,a){const n=J(e);return"Io"===t?a.ordinalNumber(n,{unit:"week"}):te(n,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getDate(),{unit:"date"}):ae.d(e,t)},D:function(e,t,a){const n=V(e);return"Do"===t?a.ordinalNumber(n,{unit:"dayOfYear"}):te(n,t.length)},E:function(e,t,a){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return a.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,a,n){const r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return te(s,2);case"eo":return a.ordinalNumber(s,{unit:"day"});case"eee":return a.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(r,{width:"short",context:"formatting"});default:return a.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,a,n){const r=e.getDay(),s=(r-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return te(s,t.length);case"co":return a.ordinalNumber(s,{unit:"day"});case"ccc":return a.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(r,{width:"narrow",context:"standalone"});case"cccccc":return a.day(r,{width:"short",context:"standalone"});default:return a.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,a){const n=e.getDay(),r=0===n?7:n;switch(t){case"i":return String(r);case"ii":return te(r,t.length);case"io":return a.ordinalNumber(r,{unit:"day"});case"iii":return a.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(n,{width:"short",context:"formatting"});default:return a.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,a){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){const n=e.getHours();let r;switch(r=12===n?re:0===n?ne:n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,a){const n=e.getHours();let r;switch(r=n>=17?oe:n>=12?ie:n>=4?se:le,t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),a.ordinalNumber(t,{unit:"hour"})}return ae.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getHours(),{unit:"hour"}):ae.H(e,t)},K:function(e,t,a){const n=e.getHours()%12;return"Ko"===t?a.ordinalNumber(n,{unit:"hour"}):te(n,t.length)},k:function(e,t,a){let n=e.getHours();return 0===n&&(n=24),"ko"===t?a.ordinalNumber(n,{unit:"hour"}):te(n,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):ae.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getSeconds(),{unit:"second"}):ae.s(e,t)},S:function(e,t){return ae.S(e,t)},X:function(e,t,a){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return ue(n);case"XXXX":case"XX":return me(n);default:return me(n,":")}},x:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"x":return ue(n);case"xxxx":case"xx":return me(n);default:return me(n,":")}},O:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+de(n,":");default:return"GMT"+me(n,":")}},z:function(e,t,a){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+de(n,":");default:return"GMT"+me(n,":")}},t:function(e,t,a){return te(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,a){return te(e.getTime(),t.length)}};function de(e,t=""){const a=e>0?"-":"+",n=Math.abs(e),r=Math.trunc(n/60),s=n%60;return 0===s?a+String(r):a+String(r)+t+te(s,2)}function ue(e,t){if(e%60==0){return(e>0?"-":"+")+te(Math.abs(e)/60,2)}return me(e,t)}function me(e,t=""){const a=e>0?"-":"+",n=Math.abs(e);return a+te(Math.trunc(n/60),2)+t+te(n%60,2)}const he=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},fe=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ge={p:fe,P:(e,t)=>{const a=e.match(/(P+)(p+)?/)||[],n=a[1],r=a[2];if(!r)return he(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;default:s=t.dateTime({width:"full"})}return s.replace("{{date}}",he(n,t)).replace("{{time}}",fe(r,t))}},xe=/^D+$/,pe=/^Y+$/,we=["D","DD","YY","YYYY"];const be=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ve=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,je=/^'([^]*?)'?$/,Ne=/''/g,ye=/[a-zA-Z]/;function ke(e,t,a){var n,r,s,i;const o=d(),l=o.locale??x,c=o.firstWeekContainsDate??(null==(r=null==(n=o.locale)?void 0:n.options)?void 0:r.firstWeekContainsDate)??1,m=o.weekStartsOn??(null==(i=null==(s=o.locale)?void 0:s.options)?void 0:i.weekStartsOn)??0,h=u(e);if(!K(h))throw new RangeError("Invalid time value");let f=t.match(ve).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,ge[t])(e,l.formatLong)}return e}).join("").match(be).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Ce(e)};if(ce[t])return{isToken:!0,value:e};if(t.match(ye))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});l.localize.preprocessor&&(f=l.localize.preprocessor(h,f));const g={firstWeekContainsDate:c,weekStartsOn:m,locale:l};return f.map(a=>{if(!a.isToken)return a.value;const n=a.value;(function(e){return pe.test(e)}(n)||function(e){return xe.test(e)}(n))&&function(e,t,a){const n=function(e,t,a){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,a);if(console.warn(n),we.includes(e))throw new RangeError(n)}(n,t,String(e));return(0,ce[n[0]])(h,n,l.localize,g)}).join("")}function Ce(e){const t=e.match(je);return t?t[1].replace(Ne,"'"):e}const Me=({tableName:t,documentId:a,size:n="sm"})=>{const{isFavorite:r,isLoading:s,toggleFavorite:i}=Y(t,a);return e.jsxs(p,{variant:"ghost",size:n,onClick:()=>i(),disabled:s,className:"gap-2",children:[e.jsx(w,{className:b("h-4 w-4 transition-all",r&&"fill-destructive text-destructive")}),"icon"!==n&&(r?"I favoriter":"Spara")]})},Se=t,Te=a,Pe=s.forwardRef(({className:t,align:a="center",sideOffset:s=4,...i},o)=>e.jsx(n,{children:e.jsx(r,{ref:o,align:a,sideOffset:s,className:b("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})}));Pe.displayName=r.displayName;const De=({dateFrom:t,dateTo:a,selectedCategories:n,availableCategories:r,onDateFromChange:s,onDateToChange:i,onCategoryToggle:o,onClearFilters:l})=>{const c=t||a||n.length>0;return e.jsxs(Se,{children:[e.jsx(Te,{asChild:!0,children:e.jsxs(p,{variant:"outline",className:"gap-2",children:[e.jsx(Q,{className:"h-4 w-4"}),"Filter",c&&e.jsx(v,{variant:"secondary",className:"ml-2",children:(t?1:0)+(a?1:0)+n.length})]})}),e.jsx(Pe,{className:"w-80",align:"end",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-semibold",children:"Avancerade filter"}),c&&e.jsxs(p,{variant:"ghost",size:"sm",onClick:l,children:[e.jsx(j,{className:"h-4 w-4 mr-1"}),"Rensa"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Från datum"]}),e.jsx(N,{type:"date",value:t,onChange:e=>s(e.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),"Till datum"]}),e.jsx(N,{type:"date",value:a,onChange:e=>i(e.target.value)})]}),r.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(z,{children:"Kategorier"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto",children:r.map(t=>e.jsx(v,{variant:n.includes(t)?"default":"outline",className:"cursor-pointer",onClick:()=>o(t),children:t},t))})]})]})})]})},Fe=20,Le=300,Oe=2;const Ee=({className:t,...a})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:b("mx-auto flex w-full justify-center",t),...a});Ee.displayName="Pagination";const Ye=s.forwardRef(({className:t,...a},n)=>e.jsx("ul",{ref:n,className:b("flex flex-row items-center gap-1",t),...a}));Ye.displayName="PaginationContent";const ze=s.forwardRef(({className:t,...a},n)=>e.jsx("li",{ref:n,className:b("",t),...a}));ze.displayName="PaginationItem";const qe=({className:t,isActive:a,size:n="icon",...r})=>e.jsx("a",{"aria-current":a?"page":void 0,className:b(k({variant:a?"outline":"ghost",size:n}),t),...r});qe.displayName="PaginationLink";const He=({className:t,...a})=>e.jsxs(qe,{"aria-label":"Go to previous page",size:"default",className:b("gap-1 pl-2.5",t),...a,children:[e.jsx(I,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});He.displayName="PaginationPrevious";const $e=({className:t,...a})=>e.jsxs(qe,{"aria-label":"Go to next page",size:"default",className:b("gap-1 pr-2.5",t),...a,children:[e.jsx("span",{children:"Next"}),e.jsx(C,{className:"h-4 w-4"})]});$e.displayName="PaginationNext";const _e=({tableName:t,title:a,description:n,source:r,backLink:c=("riksdagen"===r?"/riksdagen":"/regeringskansliet"),dataType:d,dateColumn:u="publicerad_datum",titleColumn:m="titel"})=>{const[h,f]=s.useState(""),[g,x]=s.useState("datum"),[w,b]=s.useState(1),[j,k]=s.useState(""),[C,Y]=s.useState(""),[z,I]=s.useState([]),Q=Fe,{trackView:R}={trackView:o({mutationFn:async({tableName:e,documentId:t})=>{const{error:a}=await y.rpc("increment_document_view",{p_table_name:e,p_document_id:t});if(a)throw a}}).mutate},W=function(e,t=Le){const[a,n]=s.useState(e);return s.useEffect(()=>{const a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}(h,Le),{data:X,isLoading:U}=l({queryKey:[t,W,g,j,C,z],queryFn:async()=>{let e=y.from(t).select("*");W&&W.length>=Oe&&(e=e.or(`titel.ilike.%${W}%,document_id.ilike.%${W}%,beteckningsnummer.ilike.%${W}%`)),j&&(e=e.gte(u,j)),C&&(e=e.lte(u,C));const a="datum"===g?u:m;e=e.order(a,{ascending:"datum"!==g,nullsFirst:!1});const{data:n,error:r}=await e;if(r)throw r;return n}}),K=s.useMemo(()=>{if(!X)return[];const e=new Set;return X.forEach(t=>{t.kategorier&&Array.isArray(t.kategorier)&&t.kategorier.forEach(t=>e.add(t))}),Array.from(e).sort()},[X]),V=s.useMemo(()=>X?0===z.length?X:X.filter(e=>!(!e.kategorier||!Array.isArray(e.kategorier))&&z.some(t=>e.kategorier.includes(t))):[],[X,z]),J=Math.ceil(((null==V?void 0:V.length)||0)/Q),Z=s.useMemo(()=>{const e=(w-1)*Q;return(null==V?void 0:V.slice(e,e+Q))||[]},[V,w]),ee=t=>{if(!t)return null;const a=Array.isArray(t)?t:[t];return 0===a.length?null:e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:a.map((t,a)=>{const n=t.name||t.filename||`Fil ${a+1}`,r=t.url||t.local_url||t;return"string"==typeof r&&r?e.jsxs("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-primary hover:underline",children:[e.jsx(B,{className:"h-3 w-3"}),n]},a):null})})},te=e=>!!e&&(!Array.isArray(e)||e.length>0);return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-6 md:py-8 max-w-7xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(i,{to:c,children:e.jsxs(p,{variant:"ghost",className:"mb-4",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Tillbaka"]})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-serif font-bold mb-4 text-foreground",children:a}),e.jsx("p",{className:"text-muted-foreground text-lg mb-6",children:n}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 items-stretch md:items-center mb-6",children:[e.jsxs("div",{className:"relative flex-1 min-w-0",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(N,{placeholder:"Sök efter titel, dokumentnummer eller beteckning...",value:h,onChange:e=>f(e.target.value),className:"pl-10 h-11"})]}),e.jsxs("select",{value:g,onChange:e=>x(e.target.value),className:"px-4 py-2 h-11 border rounded-md bg-background text-sm min-w-[200px]",children:[e.jsx("option",{value:"datum",children:"Sortera efter datum"}),e.jsx("option",{value:"titel",children:"Sortera efter titel"})]}),e.jsx(De,{dateFrom:j,dateTo:C,selectedCategories:z,availableCategories:K,onDateFromChange:k,onDateToChange:Y,onCategoryToggle:e=>{I(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]),b(1)},onClearFilters:()=>{k(""),Y(""),I([]),b(1)}}),e.jsxs(p,{variant:"outline",onClick:()=>{if(!V||0===V.length)return;((e,t)=>{if(!e||0===e.length)return;const a=Object.keys(e[0]),n=[a.join(","),...e.map(e=>a.map(t=>{const a=e[t];return null==a?"":"string"==typeof a&&(a.includes(",")||a.includes('"'))?`"${a.replace(/"/g,'""')}"`:a}).join(","))].join("\n"),r=new Blob(["\ufeff"+n],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a"),i=URL.createObjectURL(r);s.setAttribute("href",i),s.setAttribute("download",`${t}.csv`),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)})(V.map(e=>{var t;return{titel:e.titel,document_id:e.document_id,beteckningsnummer:e.beteckningsnummer,publicerad_datum:e.publicerad_datum,avsandare:e.avsandare||e.departement,kategorier:null==(t=e.kategorier)?void 0:t.join("; ")}}),`${a.toLowerCase().replace(/\s+/g,"-")}-${(new Date).toISOString().split("T")[0]}`)},disabled:!V||0===V.length,className:"h-11",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportera CSV"}),e.jsx("span",{className:"sm:hidden",children:"CSV"})]}),e.jsxs(p,{variant:"outline",onClick:()=>{V&&0!==V.length&&((e,t)=>{if(!e||0===e.length)return;const a=JSON.stringify(e,null,2),n=new Blob([a],{type:"application/json"}),r=document.createElement("a"),s=URL.createObjectURL(n);r.setAttribute("href",s),r.setAttribute("download",`${t}.json`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)})(V,`${a.toLowerCase().replace(/\s+/g,"-")}-${(new Date).toISOString().split("T")[0]}`)},disabled:!V||0===V.length,className:"h-11",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Exportera JSON"}),e.jsx("span",{className:"sm:hidden",children:"JSON"})]})]}),(j||C||z.length>0)&&e.jsx("div",{className:"mb-4 p-3 bg-muted rounded-md",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Visar ",(null==V?void 0:V.length)||0," av ",(null==X?void 0:X.length)||0," dokument"]})})]}),U?e.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(t=>e.jsx(S,{children:e.jsxs(T,{children:[e.jsx(P,{className:"h-6 w-3/4"}),e.jsx(P,{className:"h-4 w-1/2 mt-2"})]})},t))}):Z&&0!==Z.length?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-4",children:Z.map(a=>e.jsxs(S,{className:"hover:shadow-sm transition-all duration-200 border-border/50",children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(D,{className:"text-xl mb-2",children:a.titel||a.document_id}),e.jsxs(F,{className:"space-y-1",children:[a.beteckningsnummer&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:a.beteckningsnummer})]}),a.publicerad_datum&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:ke(new Date(a.publicerad_datum),"d MMMM yyyy")})]}),(a.avsandare||a.departement)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{children:a.avsandare||a.departement})]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[a.kategorier&&a.kategorier.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.kategorier.slice(0,3).map((t,a)=>e.jsx(v,{variant:"secondary",className:"text-xs",children:t},a))}),e.jsx(Me,{tableName:t,documentId:a.document_id})]})]})}),e.jsxs(O,{children:[a.innehall&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2 line-clamp-3",children:a.innehall}),te(a.local_files)&&ee(a.local_files),!te(a.local_files)&&$(a.url)&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:e.jsx("a",{href:$(a.url),target:"_blank",rel:"noopener noreferrer",children:e.jsxs(p,{variant:"outline",size:"sm",onClick:()=>R({tableName:t,documentId:a.document_id}),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Öppna externt"]})})})]})]},a.id))}),J>1&&e.jsx("div",{className:"mt-8",children:e.jsx(Ee,{children:e.jsxs(Ye,{children:[e.jsx(ze,{children:e.jsx(He,{onClick:()=>b(e=>Math.max(1,e-1)),className:1===w?"pointer-events-none opacity-50":"cursor-pointer"})}),Array.from({length:J},(e,t)=>t+1).filter(e=>J<=7||(1===e||e===J||e>=w-1&&e<=w+1)).map((t,a,n)=>a>0&&t-n[a-1]>1?e.jsx(ze,{children:e.jsx("span",{className:"px-4",children:"..."})},`ellipsis-${t}`):e.jsx(ze,{children:e.jsx(qe,{onClick:()=>b(t),isActive:w===t,className:"cursor-pointer",children:t})},t)),e.jsx(ze,{children:e.jsx($e,{onClick:()=>b(e=>Math.min(J,e+1)),className:w===J?"pointer-events-none opacity-50":"cursor-pointer"})})]})})})]}):e.jsx(E,{message:`Inga ${a.toLowerCase()} hittades`,suggestion:h||j||C||z.length>0?"Prova att ändra dina filter":`Använd knappen ovan för att hämta ${a.toLowerCase()}`})]})})};export{_e as G};
