import{A as e,L as a,v as s,f as r,$ as l,U as n,Z as t,n as d,W as i,K as m,H as c,T as o,a as h,e as x,Q as p}from"./index-Dvj5Fnvj.js";import{c as u}from"./EmptyState-J9hu3_4Q-rxQZmsJH.js";import{r as g}from"./FilterBar-BT3NUdz--CoJLJjLW.js";import{t as j}from"./urlHelpers-CAXJNDPg-FIZwN2nf.js";import{t as f}from"./calendar-C0Po1oJA-ZB5SqKl4.js";import{t as N}from"./external-link-DO6NI0fG-CEdz9uJh.js";import"./alert-BBRM3LDk-C87cXJBj.js";import"./supabase-vendor-CFP917pd.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=i("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),b=()=>{const[i,b]=e.useState(""),{data:y,isLoading:k}=a({queryKey:["pressmeddelanden"],queryFn:async()=>{const{data:e,error:a}=await p.from("regeringskansliet_pressmeddelanden").select("*").order("publicerad_datum",{ascending:!1});if(a)throw a;return e}}),w=null==y?void 0:y.filter(e=>{var a,s,r;const l=i.toLowerCase();return(null==(a=e.titel)?void 0:a.toLowerCase().includes(l))||(null==(s=e.departement)?void 0:s.toLowerCase().includes(l))||(null==(r=e.innehall)?void 0:r.toLowerCase().includes(l))});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"w-full bg-primary py-1"}),s.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[s.jsxs("header",{className:"mb-12",children:[s.jsx(r,{to:"/regeringskansliet",className:"text-primary hover:underline mb-4 inline-block",children:"← Tillbaka till Regeringskansliet"}),s.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Pressmeddelanden"}),s.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),s.jsxs("p",{className:"text-muted-foreground",children:[(null==w?void 0:w.length)||0," pressmeddelanden från regeringen"]})]}),s.jsx(g,{searchQuery:i,onSearchChange:b,placeholder:"Sök pressmeddelanden, departement..."}),k?s.jsx("div",{className:"space-y-4",children:[...Array(10)].map((e,a)=>s.jsx(l,{children:s.jsxs(n,{children:[s.jsx(t,{className:"h-6 w-3/4 mb-2"}),s.jsx(t,{className:"h-4 w-1/2"})]})},a))}):w&&0===w.length?s.jsx(u,{message:i?"Inga pressmeddelanden hittades":"Inga pressmeddelanden i databasen",suggestion:i?"Prova att ändra din sökning":"Använd 'Hämta data'-knappen för att ladda ned pressmeddelanden"}):s.jsx("div",{className:"space-y-4",children:null==w?void 0:w.map(e=>s.jsx(l,{className:"hover:shadow-lg transition-shadow",children:s.jsx(n,{children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:e.departement&&s.jsxs(d,{variant:"outline",className:"gap-1",children:[s.jsx(v,{className:"h-3 w-3"}),e.departement]})}),s.jsx(m,{className:"text-xl mb-2",children:e.titel||"Pressmeddelande"}),e.innehall&&s.jsx(c,{className:"text-base line-clamp-2",children:e.innehall}),s.jsx("div",{className:"flex items-center gap-4 mt-3 text-sm text-muted-foreground",children:e.publicerad_datum&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(f,{className:"h-3 w-3"}),o(new Date(e.publicerad_datum),{addSuffix:!0,locale:x})]})}),e.local_bilagor&&Array.isArray(e.local_bilagor)&&e.local_bilagor.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t",children:[s.jsx("p",{className:"text-sm font-medium mb-2",children:"Nedladdade bilagor:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:e.local_bilagor.map((e,a)=>s.jsxs("a",{href:e.local_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-primary hover:underline",children:[s.jsx(h,{className:"h-3 w-3"}),e.filename]},a))})]})]}),e.url&&s.jsxs("a",{href:j(e.url)||"#",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary hover:underline",children:["Läs mer ",s.jsx(N,{className:"h-3 w-3"})]})]})})},e.id))})]})]})};export{b as default};
