import{O as e,j as s,Q as a,U as t,W as l,X as r,Y as n,Z as i}from"./ui-vendor-DdA1a0jp.js";import{r as d,L as o}from"./react-vendor-DwCPvY97.js";import{u as c}from"./query-vendor-ow7rXqf0.js";import{c as m,e as x,X as g,C as h,a as u,S as j,f,b as p,d as v,T as N,B as b,g as y,s as k}from"./index-DLYd5yL7.js";import{A as w,a as _,b as S}from"./avatar-PApL8q4f.js";import{F as C}from"./FilterBar-BT3NUdz-.js";import{E as L}from"./EmptyState-J9hu3_4Q.js";import{M as $,F as A,C as F,a as q,S as I}from"./separator-DC5bqMQM.js";import{C as R}from"./calendar-C0Po1oJA.js";import"./supabase-vendor-DZwaFCMP.js";import"./alert-BBRM3LDk.js";
/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=m("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),D=e,E=a,z=d.forwardRef(({className:e,...a},t)=>s.jsx(i,{ref:t,className:x("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a}));z.displayName=i.displayName;const T=d.forwardRef(({className:e,children:a,...r},n)=>s.jsxs(E,{children:[s.jsx(z,{}),s.jsxs(t,{ref:n,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[a,s.jsxs(l,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity data-[state=open]:bg-accent data-[state=open]:text-muted-foreground hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none",children:[s.jsx(g,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));T.displayName=t.displayName;const K=({className:e,...a})=>s.jsx("div",{className:x("flex flex-col space-y-1.5 text-center sm:text-left",e),...a});K.displayName="DialogHeader";const B=d.forwardRef(({className:e,...a},t)=>s.jsx(r,{ref:t,className:x("text-lg font-semibold leading-none tracking-tight",e),...a}));B.displayName=r.displayName;const H=d.forwardRef(({className:e,...a},t)=>s.jsx(n,{ref:t,className:x("text-sm text-muted-foreground",e),...a}));H.displayName=n.displayName;const O=({intressentId:e})=>{const{data:a,isLoading:t,error:l}=c({queryKey:["sagt-och-gjort-stats",e],queryFn:async()=>{const{data:s,error:a}=await k.from("v_ledamot_statistik").select("*").eq("intressent_id",e).single();if(a)throw a;return s},enabled:!!e}),r=e=>e?new Date(e).toLocaleDateString("sv-SE",{year:"numeric",month:"long",day:"numeric"}):"Ingen data";if(t)return s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(j,{className:"h-6 w-48 mb-2"}),s.jsx(j,{className:"h-4 w-64"})]}),s.jsx(f,{children:s.jsx("div",{className:"space-y-4",children:[...Array(4)].map((e,a)=>s.jsx(j,{className:"h-16 w-full"},a))})})]});if(l||!a)return s.jsxs(h,{children:[s.jsxs(u,{children:[s.jsx(p,{children:"Sagt och gjort"}),s.jsx(v,{children:"Ingen statistik tillgänglig"})]}),s.jsx(f,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Statistik för denna ledamot kunde inte hämtas."})})]});const n=[{label:"Anföranden",count:a.antal_anforanden,icon:$,color:"text-blue-500"},{label:"Motioner",count:a.antal_motioner,icon:A,color:"text-green-500"},{label:"Skriftliga frågor",count:a.antal_fragor,icon:F,color:"text-orange-500"},{label:"Interpellationer",count:a.antal_interpellationer,icon:q,color:"text-purple-500"}];return s.jsxs(h,{children:[s.jsx(u,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(p,{className:"flex items-center gap-2",children:[s.jsx(N,{className:"h-5 w-5"}),"Sagt och gjort"]}),s.jsx(v,{children:"Aktivitetsstatistik från riksdagen (2010/11 - )"})]}),s.jsxs(b,{variant:"outline",className:"text-lg px-4 py-2",children:[a.totalt_antal_aktiviteter.toLocaleString("sv-SE")," aktiviteter"]})]})}),s.jsxs(f,{className:"space-y-6",children:[s.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.map(e=>s.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50 hover:bg-muted transition-colors",children:[s.jsx(e.icon,{className:`h-6 w-6 ${e.color}`}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:e.count.toLocaleString("sv-SE")}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.label})]})]},e.label))}),s.jsx(I,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50",children:[s.jsx(y,{className:"h-6 w-6 text-blue-500"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xl font-bold",children:(e=>{if(!e)return"0 min";const s=Math.floor(e/3600),a=Math.floor(e%3600/60);return s>0?`${s}h ${a}min`:`${a} min`})(a.total_talartid_sekunder)}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Total talartid"})]})]}),s.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-muted/50",children:[s.jsx(M,{className:"h-6 w-6 text-green-500"}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-xl font-bold",children:[(a.totalt_antal_tecken/1e3).toFixed(0),"k"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Antal tecken"})]})]})]}),s.jsx(I,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Aktivitetsperiod:"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground mb-1",children:"Första aktivitet"}),s.jsx("div",{className:"font-medium",children:r(a.forsta_aktivitet)})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-muted-foreground mb-1",children:"Senaste aktivitet"}),s.jsx("div",{className:"font-medium",children:r(a.senaste_aktivitet)})]})]})]})]})]})},P=()=>{var e,a;const[t,l]=d.useState(""),[r,n]=d.useState(null),[i,m]=d.useState(!1),{data:x,isLoading:g}=c({queryKey:["ledamoter"],queryFn:async()=>{const{data:e,error:s}=await k.from("riksdagen_ledamoter").select("*").order("efternamn",{ascending:!0});if(s)throw s;return e}}),f={S:"bg-red-600",M:"bg-blue-600",SD:"bg-yellow-600",C:"bg-green-600",V:"bg-red-700",KD:"bg-blue-800",L:"bg-blue-400",MP:"bg-green-500"},v=null==x?void 0:x.filter(e=>{var s,a,l,r;const n=t.toLowerCase();return(null==(s=e.fornamn)?void 0:s.toLowerCase().includes(n))||(null==(a=e.efternamn)?void 0:a.toLowerCase().includes(n))||(null==(l=e.parti)?void 0:l.toLowerCase().includes(n))||(null==(r=e.valkrets)?void 0:r.toLowerCase().includes(n))});return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"w-full bg-primary py-1"}),s.jsxs("div",{className:"container mx-auto px-4 py-12 max-w-7xl",children:[s.jsxs("header",{className:"mb-12",children:[s.jsx(o,{to:"/riksdagen",className:"text-primary hover:underline mb-4 inline-block",children:"← Tillbaka till Riksdagen"}),s.jsx("h1",{className:"text-4xl font-serif font-bold text-foreground mb-4",children:"Riksdagens Ledamöter"}),s.jsx("div",{className:"w-20 h-1 bg-secondary mb-6"}),s.jsxs("p",{className:"text-muted-foreground",children:[(null==v?void 0:v.length)||0," ledamöter i riksdagen"]})]}),s.jsx(C,{searchQuery:t,onSearchChange:l,placeholder:"Sök ledamot, parti eller valkrets..."}),g?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(12)].map((e,a)=>s.jsx(h,{children:s.jsxs(u,{children:[s.jsx(j,{className:"h-24 w-24 rounded-full mx-auto mb-4"}),s.jsx(j,{className:"h-6 w-3/4 mx-auto mb-2"}),s.jsx(j,{className:"h-4 w-1/2 mx-auto"})]})},a))}):v&&0===v.length?s.jsx(L,{message:t?"Inga ledamöter hittades":"Inga ledamöter i databasen",suggestion:t?"Prova att ändra din sökning":"Använd 'Hämta data'-knappen på Riksdagen-sidan för att ladda ned ledamöter"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:null==v?void 0:v.map(e=>{var a,t;return s.jsx(h,{className:"hover:shadow-lg transition-all cursor-pointer hover:scale-[1.02]",onClick:()=>(e=>{n(e),m(!0)})(e),children:s.jsxs(u,{className:"text-center",children:[s.jsxs(w,{className:"h-24 w-24 mx-auto mb-4",children:[s.jsx(_,{src:e.local_bild_url||e.bild_url||void 0,alt:`${e.fornamn} ${e.efternamn}`}),s.jsxs(S,{children:[null==(a=e.fornamn)?void 0:a[0],null==(t=e.efternamn)?void 0:t[0]]})]}),s.jsxs(p,{className:"text-lg",children:[e.tilltalsnamn||e.fornamn," ",e.efternamn]}),s.jsxs("div",{className:"flex flex-col gap-2 items-center mt-2",children:[e.parti&&s.jsx(b,{className:`${f[e.parti]||"bg-gray-600"} text-white`,children:e.parti}),e.valkrets&&s.jsx("span",{className:"text-sm text-muted-foreground",children:e.valkrets})]})]})},e.id)})}),s.jsx(D,{open:i,onOpenChange:m,children:s.jsx(T,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:r&&s.jsxs(s.Fragment,{children:[s.jsx(K,{children:s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsxs(w,{className:"h-20 w-20",children:[s.jsx(_,{src:r.local_bild_url||r.bild_url||void 0,alt:`${r.fornamn} ${r.efternamn}`}),s.jsxs(S,{className:"text-2xl",children:[null==(e=r.fornamn)?void 0:e[0],null==(a=r.efternamn)?void 0:a[0]]})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs(B,{className:"text-2xl",children:[r.tilltalsnamn||r.fornamn," ",r.efternamn]}),s.jsxs(H,{className:"flex items-center gap-2 mt-2",children:[r.parti&&s.jsx(b,{className:`${f[r.parti]||"bg-gray-600"} text-white`,children:r.parti}),r.valkrets&&s.jsx("span",{className:"text-sm",children:r.valkrets})]})]})]})}),s.jsx("div",{className:"mt-6",children:s.jsx(O,{intressentId:r.intressent_id})})]})})})]})]})};export{P as default};
